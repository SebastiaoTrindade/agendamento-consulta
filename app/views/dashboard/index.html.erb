<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <%= stylesheet_link_tag 'dashboard', media: 'all' %>
    <%= stylesheet_link_tag 'sb-admin-2.min', media: 'all' %>
        
</head>
<body>
<div id="wrapper">
<!-- Inicio Sidebar -->
<div class="row">
    <div id="sidebar">
        <div class="sidebar-heading">Sistema</div>
        <a href="#" class="active"><i class="fas fa-fw fa-tachometer-alt"></i> Dashboard</a>         
        <a href="<%= new_usuario_path %>">
            <i class="fas fa-fw fa-user"></i> Usuários
        </a>

        <a href="#"><i class="fa-regular fa-calendar-check"></i> Agendamentos</a>
        <a href="#" data-bs-toggle="modal" data-bs-target="#psicopedagogoModal">
            <i class="fa-solid fa-user-doctor"></i> Psicopedadoga
        </a>
        <a href="#" data-bs-toggle="modal" data-bs-target="#pacienteModal">
            <i class="fa-solid fa-hospital-user"></i> Pacientes
        </a>        
        <a href="#"><i class="fa-solid fa-paste"></i> Relatórios</a>        
        <%= link_to logout_path, method: :delete, data: { confirm: "Tem certeza que deseja sair?", turbolinks: false }, class: 'd-flex align-items-center' do %>
            <i class="fas fa-fw fa-sign-out-alt"></i>
            <span class="ms-2">Logout</span>
        <% end %>      
        </div>
</div>
<!-- Fim Sidebar -->

<!-- Content -->
<div class="row">
    <div id="content">    
        <div class="content-header">            
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Pesquisar...">
            </div>
            <div class="user-info">
                <i class="fas fa-user-circle"></i>
                <span><%= current_usuario.nome if current_usuario %></span>
                <p id="current-datetime"><%= Time.now.strftime("%A, %d/%m/%Y - %H:%M:%S") %></p>                
            </div>
        </div>       
    </div>
</div>    
<!-- Fim Content -->

</div>





<!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>

<!-- Scripts do Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
<%= csrf_meta_tags %>

<!-- Data e hora -->
<script>
  function updateTime() {
    var now = new Date();
    var daysOfWeek = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
    var dayOfWeek = daysOfWeek[now.getDay()];
    var day = String(now.getDate()).padStart(2, '0');
    var month = String(now.getMonth() + 1).padStart(2, '0'); // Janeiro é 0!
    var year = now.getFullYear();
    var hours = String(now.getHours()).padStart(2, '0');
    var minutes = String(now.getMinutes()).padStart(2, '0');
    var seconds = String(now.getSeconds()).padStart(2, '0');

    var formattedDateTime = dayOfWeek + ', ' + day + '/' + month + '/' + year + ' - ' + hours + ':' + minutes + ':' + seconds;
    document.getElementById('current-datetime').textContent = formattedDateTime;
  }

  // Atualiza a hora a cada segundo
  setInterval(updateTime, 1000);
</script>

<script>
    var ctx1 = document.getElementById('earningsChart').getContext('2d');
    var earningsChart = new Chart(ctx1, {
        type: 'line',
        data: {
            labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
            datasets: [{
                label: 'Earnings',
                data: [10000, 20000, 30000, 40000, 50000, 60000, 70000],
                borderColor: '#4e73df',
                backgroundColor: 'rgba(78, 115, 223, 0.1)',
                fill: true,
            }]
        }
    });

    var ctx2 = document.getElementById('revenueChart').getContext('2d');
    var revenueChart = new Chart(ctx2, {
        type: 'pie',
        data: {
            labels: ['Direct', 'Social', 'Referral'],
            datasets: [{
                data: [55, 30, 15],
                backgroundColor: ['#4e73df', '#1cc88a', '#36b9cc'],
            }]
        }
    });
</script>
</body>
</html>

